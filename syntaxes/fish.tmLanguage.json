{
  "name": "fish",
  "scopeName": "source.fish",
  "fileTypes": [
    "fish"
  ],
  "uuid": "9CA6DB6F-A16F-4836-A058-617C7378775D",
  "firstLineMatch": "^#!.*\\bfish\\b",
  "foldingStartMarker": "^\\s*(function|while|if|switch|for|begin)\\s.*$",
  "foldingStopMarker": "^\\s*end\\s*$",
  "patterns": [
    {
      "comment": "Double quoted string.",
      "begin": "\"",
      "end": "\"",
      "name": "meta.string.fish",
      "beginCaptures": {
        "0": {
          "name": "string.quoted.double.fish punctuation.definition.string.begin.fish"
        }
      },
      "endCaptures": {
        "0": {
          "name": "string.quoted.double.fish punctuation.definition.string.end.fish"
        }
      },
      "patterns": [
        {
          "comment": "Escaped characters. https://fishshell.com/docs/current/#quotes",
          "match": "\\\\(\\\"|\\$|$|\\\\)",
          "name": "string.quoted.double.fish constant.character.escape.fish"
        },
        {
          "include": "#command-substitution-interpolated"
        },
        {
          "include": "#variable-interpolated"
        },
        {
          "comment": "String characters.",
          "match": ".+?",
          "name": "string.quoted.double.fish"
        }
      ]
    },
    {
      "comment": "Single quoted string.",
      "begin": "'",
      "end": "'",
      "name": "meta.string.fish string.quoted.single.fish",
      "beginCaptures": {
        "0": {
          "name": "punctuation.definition.string.begin.fish"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.string.end.fish"
        }
      },
      "patterns": [
        {
          "comment": "Escaped characters. https://fishshell.com/docs/current/#quotes",
          "match": "\\\\('|`|\\\\)",
          "name": "constant.character.escape.fish"
        }
      ]
    },
    {
      "comment": "line comment",
      "match": "(?<!\\$)(#)(?!\\{).*$\\n?",
      "name": "comment.line.number-sign.fish",
      "captures": {
        "1": {
          "name": "punctuation.definition.comment.fish"
        }
      }
    },
    {
      "comment": "name of command, either a function or a binary",
      "match": "(?x)\n( # Start of command.\n  ^ |\n  \\G | # Start of match.\n  && |\n  \\| |\n  ; |\n  \\b(if|while)\\b\\s\n)\\s*\n(?!\n  (?<!\\.)\n  \\b(function|while|if|else|switch|case|for|in|begin|end|continue|break|return|source|exit|wait|and|or|not)\\b\n  (?![?!])\n)\n([a-zA-Z_\\-0-9\\[\\].]+)",
      "captures": {
        "2": {
          "name": "keyword.control.fish"
        },
        "4": {
          "name": "support.function.command.fish"
        }
      }
    },
    {
      "comment": "keywords that affect control flow",
      "match": "(?x)\n(?<!\\.)\n\\b(function|while|if|else|switch|case|for|in|begin|end|continue|break|return|source|exit|wait|and|or|not)\\b\n(?![?!])",
      "name": "keyword.control.fish"
    },
    {
      "match": "(?<!\\.)\\bfunction\\b(?![?!])",
      "name": "storage.type.fish"
    },
    {
      "match": "\\|",
      "name": "keyword.operator.pipe.fish"
    },
    {
      "comment": "IO Redirection",
      "match": "(?x)\n<| # Standard Input\n(>|\\^|>>|\\^\\^)(&[012\\-])?| # Redirection of stderr\n[012](<|>|>>)(&[012\\-])? # Redirect input/output of file descriptors",
      "name": "keyword.operator.redirect.fish"
    },
    {
      "match": "&",
      "name": "keyword.operator.background.fish"
    },
    {
      "match": "\\*\\*|\\*|\\?",
      "name": "keyword.operator.glob.fish"
    },
    {
      "comment": "command short/long options",
      "match": "\\s(-{1,2}[a-zA-Z_\\-0-9]+|-\\w)\\b",
      "captures": {
        "1": {
          "name": "source.option.fish"
        }
      }
    },
    {
      "include": "#command-substitution"
    },
    {
      "include": "#variable"
    },
    {
      "include": "#escape"
    }
  ],
  "repository": {
    "command-substitution": {
      "begin": "\\$?\\(",
      "end": "\\)",
      "name": "meta.parens.command_substitution.fish",
      "beginCaptures": {
        "0": {
          "name": "punctuation.section.parens.begin.fish"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.section.parens.end.fish"
        }
      },
      "patterns": [
        {
          "include": "$self"
        }
      ]
    },
    "command-substitution-interpolated": {
      "begin": "\\$\\(",
      "end": "\\)",
      "name": "meta.interpolation.fish",
      "contentName": "meta.parens.command_substitution.fish",
      "beginCaptures": {
        "0": {
          "name": "punctuation.section.interpolation.begin.fish meta.parens.command_substitution.fish punctuation.section.parens.begin.fish"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.section.interpolation.end.fish meta.parens.command_substitution.fish punctuation.section.parens.end.fish"
        }
      },
      "patterns": [
        {
          "include": "$self"
        }
      ]
    },
    "escape": {
      "patterns": [
        {
          "comment": "single character character escape sequences",
          "match": "\\\\[abefnrtv $*?~#(){}\\[\\]<>^&|;\"']",
          "name": "constant.character.escape.single.fish"
        },
        {
          "comment": "escapes the ascii character with the specified value (hexadecimal)",
          "match": "\\\\x[0-9a-fA-F]{1,2}",
          "name": "constant.character.escape.hex-ascii.fish"
        },
        {
          "comment": "escapes a byte of data with the specified value (hexadecimal). If you are using mutibyte encoding, this can be used to enter invalid strings. Only use this if you know what are doing.",
          "match": "\\\\X[0-9a-fA-F]{1,2}",
          "name": "constant.character.escape.hex-byte.fish"
        },
        {
          "comment": "escapes the ascii character with the specified value (octal)",
          "match": "\\\\[0-7]{1,3}",
          "name": "constant.character.escape.octal.fish"
        },
        {
          "comment": "escapes the 16-bit unicode character with the specified value (hexadecimal)",
          "match": "\\\\u[0-9a-fA-F]{1,4}",
          "name": "constant.character.escape.unicode-16-bit.fish"
        },
        {
          "comment": "escapes the 32-bit unicode character with the specified value (hexadecimal)",
          "match": "\\\\U[0-9a-fA-F]{1,8}",
          "name": "constant.character.escape.unicode-32-bit.fish"
        },
        {
          "comment": "escapes the control sequence generated by pressing the control key and the specified letter",
          "match": "\\\\c[a-zA-Z]",
          "name": "constant.character.escape.control.fish"
        }
      ]
    },
    "variable": {
      "patterns": [
        {
          "comment": "Built-in variables visible by pressing $ TAB TAB in a new shell",
          "match": "(?x)\n(\\$)\n(\n  argv|\n  CMD_DURATION|\n  COLUMNS|\n  fish_bind_mode|\n  fish_color_autosuggestion|\n  fish_color_cancel|\n  fish_color_command|\n  fish_color_comment|\n  fish_color_cwd_root|\n  fish_color_cwd|\n  fish_color_end|\n  fish_color_error|\n  fish_color_escape|\n  fish_color_hg_added|\n  fish_color_hg_clean|\n  fish_color_hg_copied|\n  fish_color_hg_deleted|\n  fish_color_hg_dirty|\n  fish_color_hg_modified|\n  fish_color_hg_renamed|\n  fish_color_hg_unmerged|\n  fish_color_hg_untracked|\n  fish_color_history_current|\n  fish_color_host_remote|\n  fish_color_host|\n  fish_color_match|\n  fish_color_normal|\n  fish_color_operator|\n  fish_color_param|\n  fish_color_quote|\n  fish_color_redirection|\n  fish_color_search_match|\n  fish_color_selection|\n  fish_color_status|\n  fish_color_user|\n  fish_color_valid_path|\n  fish_complete_path|\n  fish_function_path|\n  fish_greeting|\n  fish_key_bindings|\n  fish_pager_color_completion|\n  fish_pager_color_description|\n  fish_pager_color_prefix|\n  fish_pager_color_progress|\n  fish_pid|\n  fish_prompt_hg_status_added|\n  fish_prompt_hg_status_copied|\n  fish_prompt_hg_status_deleted|\n  fish_prompt_hg_status_modified|\n  fish_prompt_hg_status_order|\n  fish_prompt_hg_status_unmerged|\n  fish_prompt_hg_status_untracked|\n  FISH_VERSION|\n  history|\n  hostname|\n  IFS|\n  LINES|\n  pipestatus|\n  status|\n  umask|\n  version\n)\\b",
          "name": "variable.language.fish",
          "captures": {
            "1": {
              "name": "punctuation.definition.variable.fish"
            }
          }
        },
        {
          "match": "(\\$)([a-zA-Z_][a-zA-Z0-9_]*)",
          "name": "variable.other.readwrite.fish",
          "captures": {
            "1": {
              "name": "punctuation.definition.variable.fish"
            }
          }
        }
      ]
    },
    "variable-interpolated": {
      "match": "(\\$)([a-zA-Z_][a-zA-Z0-9_]*)",
      "name": "meta.interpolation.fish",
      "captures": {
        "1": {
          "name": "punctuation.section.interpolation.begin.fish variable.other.readwrite.fish punctuation.definition.variable.fish"
        },
        "2": {
          "name": "variable.other.readwrite.fish"
        }
      }
    }
  }
}
